---
const { frontmatter } = Astro.props;
import { getCurrentLevelOneItem, getMenuItems } from '../utils/navMenuUtils.ts';
const topItem = getCurrentLevelOneItem(frontmatter);
const menuItems = getMenuItems(frontmatter);
---

<div class="sidenav" id="navigation">
   {
      topItem && menuItems.length > 0 && (
         <nav aria-label={`${topItem.frontmatter.title} sidebar menu`}>
            <h2 class="sidenav__heading">
               <a href={topItem.url}>{topItem.frontmatter.title}</a>
            </h2>
            <ul class="sidenav__items">
               {menuItems.map((menuItem) => (
                  <li class="sidenav__item">
                     <a
                        href={menuItem.url}
                        class="sidenav__item__link"
                        aria-current={menuItem.isCurrentPage ? 'page' : 'false'}
                     >
                        {menuItem.frontmatter.title}
                        {menuItem.frontmatter.deprecated && (
                           <span class="doc-badge doc-badge--danger">
                              Deprecated
                           </span>
                        )}
                        {menuItem.frontmatter.new && (
                           <span class="doc-badge doc-badge--success">New</span>
                        )}
                     </a>
                  </li>
               ))}
            </ul>
         </nav>
      )
   }
</div>
